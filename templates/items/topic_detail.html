{% extends "base.html" %}
{% block title %}{{ object.title }}{% endblock %}

{% block content %}
<div class="topic-header">
  <div class="detail-title"><a href={{ object.url }}>{{ object.title }}</a></div>

  <span class="comment_info">
    submitted by <a href="/users/u/{{ object.user }}/profile/">{{ object.user }}</a> {{ object.get_elapsed }} ago
  </span>

  {% with object.get_first_comment as comment %}
  {% if comment %}

  <div class="firstcomment">
    {{ comment.comment_html|safe }}
  </div>
  <div class="comment-menu">
    
    {% with comment.get_viewable_arguments as num %}
    <a class="menu {% ifnotequal num 0 %}hotargs{% endifnotequal %}" href="/comments/{{ comment.id }}/arguments/">{{ num }} debate{{ num|pluralize }}</a>
    {% endwith %}
    {% if user.is_authenticated %}
    {% ifnotequal user object.user %}
    <a class="menu" href='#' onclick="displayFormComment('#argue{{ comment.id }}'); return false;">debate</a>
    <div class="action_block">
      {% include "comments/argue_form.html" %}
    </div>
    {% endifnotequal %}
    {% else %}
    {% endif %}
  </div>
  {% endif %}
  {% endwith %}

  {% include "comments/form.html" %}
</div>


{% if rest_c %}
<h4>Comments</h4>
<div id="comments">
  {% for comment in rest_c %}
  <div id="comment_div{{ comment.id }}" class="comment_div" style="margin-left: {{ comment.nesting }}px">
    {% include "comments/one_comment.html" %}
  </div>
  {% endfor %}
</div>

<div class="pages">
  {% if has_previous %}
  <a id="prev" href="/{{ object.id }}/{{ previous }}">Previous</a>
  {% endif %}
  {% if has_next %}
  <a id="next" href="/{{ object.id }}/{{ next }}">Next</a>
  {% endif %}
</div>

{% else %}

<p>No comments</p>
{% endif %}

{% endblock %}

{% block ads %}
{% include "ads.html" %}
{% endblock %}

